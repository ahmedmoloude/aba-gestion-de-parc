<div class="dialog" [formGroup]="createAffectation">
    <div
      class="grid grid-cols-3 gap-4 bg-[#E9E9E9] rounded-[12px_12px_0px_0px] p-4"
    >
      <h2 mat-dialog-title class="col-span-2">{{ form_btn }} d'un Objectif : {{ objectif?.name }} / {{ agence?.name }} {{ type }}</h2>
      <div class="text-right cursor-pointer" mat-button mat-dialog-close>
        <mat-icon>close</mat-icon>
      </div>
    </div>
      <p class="text-center"><mat-icon class="text-6xl text-[#E8E8E8]">person</mat-icon>
      </p>
      <div class="grid grid-cols-1 gap-4"  *ngIf="dialog_type == 'agence-simple'">
        <div class="grid grid-cols-12 gap-4 pl-5 pr-5">
          <div> <i-field [type]="'text'" [label]="'Janvier'" formControlName="janvier"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Février'" formControlName="fevrier"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Mars'" formControlName="mars"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Avril'" formControlName="avril"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Mai'" formControlName="mai"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Juin'" formControlName="juin"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Juillet'" formControlName="juillet"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Août'" formControlName="aout"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Septembre'" formControlName="septembre"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Octobre'" formControlName="octobre"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Novembre'" formControlName="novembre"></i-field></div>
          <div> <i-field [type]="'text'" [label]="'Décembre'" formControlName="decembre"></i-field></div>
        </div>
      </div>
        <div class="text-center flex-col gap-4 pl-5 pr-5" *ngIf="dialog_type != 'agence-simple'" >
          <mat-form-field class="mt-5">
            <mat-label>Sélectionner un commercial</mat-label>
            <mat-select matNativeControl formControlName="objectif" formControlName="commercial_id">
              <mat-option [value]="commercial.id" *ngFor="let commercial of commercials">{{ commercial.first_name }} {{ commercial.last_name }}</mat-option>
            </mat-select>
          </mat-form-field>

          <ng-container formArrayName="sectors">
            <ng-container 
            
              *ngFor="
                let item of createAffectation.get('sectors')['controls'];
                let i = index
              "
              [formGroupName]="i"

            >
              <div class="flex gap-4 pl-5 pr-5 mt-5">
                <div class="flex-initial w-64">
                  <mat-form-field appearance="fill">
                    <mat-label>Secteur</mat-label>
                    <mat-select formControlName="sector_id" >
                      <mat-option *ngFor="let sector of sectors" [value]="sector.id">{{
                        sector?.name}}</mat-option>
                      <!-- <mat-option value="option3">Option 3</mat-option> -->
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="flex-initial w-32"> <i-field  formControlName="janvier" [type]="'text'" [label]="'Janvier'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="fevrier" [type]="'text'" [label]="'Février'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="mars" [type]="'text'" [label]="'Mars'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="avril" [type]="'text'" [label]="'Avril'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="mai" [type]="'text'" [label]="'Mai'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="juin" [type]="'text'" [label]="'Juin'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="juillet" [type]="'text'" [label]="'Juillet'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="aout" [type]="'text'" [label]="'Août'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="septembre" [type]="'text'" [label]="'Septembre'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="octobre" [type]="'text'" [label]="'Octobre'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="novembre" [type]="'text'" [label]="'Novembre'" ></i-field></div>
                <div class="flex-initial w-32"> <i-field  formControlName="decembre" [type]="'text'" [label]="'Décembre'" ></i-field></div>
                <div class="w-14"  *ngIf="createAffectation.get('sectors')['controls'].length > 1"                >
                  <mat-icon class="text-red-500">delete_forever</mat-icon>
                </div>
              </div>
            </ng-container>

          </ng-container>
          <div class="flex mt-5 ml-3" (click)="addNewSector()">
            <mat-icon class=" text-[#0C8040] pt-1">add_circle</mat-icon>
            <h2 class="text-[#0C8040] font-normal pl-2 mb-0 text-base">Ajouter un secteur</h2>
          </div>
      </div>
      
    <div class="grid grid-cols-2 gap-4 mt-4 mb-2 p-4">
        <div>
          <button
            class="underline w-32 p-4 mr-3 font-bold text-[18px]"
            mat-dialog-close
          >
          Abonndonner
          </button>
        </div>
        <div class="text-right">
          <button
              (click) = "submit()"
              class="bg-[#0C8040] text-[#fff] border-[#0C8040] rounded-[28px] shadow-[0px_3px_6px_#00000029] w-32 p-4 mr-3 font-bold text-[18px]"
          >
          {{ form_btn }}
          </button>
        </div>
      </div>
  </div>