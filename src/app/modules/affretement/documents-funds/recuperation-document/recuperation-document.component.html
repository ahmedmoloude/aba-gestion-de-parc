<div class="dialog">
    <div
      class="grid grid-cols-3 gap-4 bg-[#E9E9E9] rounded-[12px_12px_0px_0px] p-4"
    >
      <h2 mat-dialog-title class="col-span-2">
        {{status=="SCANNED"?"Récupération physique":"Remise"}}
      </h2>
      <div class="text-right cursor-pointer" mat-button mat-dialog-close>
        <mat-icon>close</mat-icon>
      </div>
    </div>
    <!-- <div mat-dialog-content class="dialog-carte">
        <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
            <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
              <button mat-icon-button disabled></button>
              <mat-checkbox (change)="todoItemSelectionToggle(node)" class="example-margin">{{node.name}}</mat-checkbox>
            </mat-tree-node>
            <mat-tree-node *matTreeNodeDef="let node;when: hasChild" matTreeNodePadding>
              <button mat-icon-button matTreeNodeToggle
                      [attr.aria-label]="'Toggle ' + node.name">
                <mat-icon class="mat-icon-rtl-mirror">
                  {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                </mat-icon>
              </button>
              <mat-checkbox
                (change)="todoItemSelectionToggle(node)"
                class="example-margin">{{node.name}}
              </mat-checkbox>

                <label class="file-input-label" *ngIf="status=='RECOVER'">
                  <input type="file" (change)="onFileChange($event, node)" class="file-input" accept="image/png, image/svg+xml, image/jpeg, image/jpg, image/gif, application/pdf,image/x-eps'"  multiple/>
                  <mat-icon class="pl-[5px] file-icon">attach_file</mat-icon>
                </label>
            </mat-tree-node>
          </mat-tree>
    </div> -->

    <div mat-dialog-content class="dialog-carte">
      <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
          <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
            <button mat-icon-button disabled></button>
            <mat-checkbox class="example-margin"
              [checked]="checklistSelection.isSelected(node)"
              (change)="todoLeafItemSelectionToggle(node)">{{node.name}}</mat-checkbox>
          </mat-tree-node>
          <mat-tree-node *matTreeNodeDef="let node;when: hasChild" matTreeNodePadding>
            <button mat-icon-button matTreeNodeToggle
                    [attr.aria-label]="'Toggle ' + node.name">
              <mat-icon class="mat-icon-rtl-mirror">
                {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
              </mat-icon>
            </button>
            <!-- <mat-checkbox
              (change)="todoItemSelectionToggle(node)"
              class="example-margin">{{node.name}}
            </mat-checkbox> -->
            <mat-checkbox
              class="example-margin"
              [checked]="descendantsAllSelected(node)"
              [indeterminate]="descendantsPartiallySelected(node)"
              (change)="todoItemSelectionToggle(node)">{{node.name}}
            </mat-checkbox>

              <label class="file-input-label" *ngIf="status=='RECOVER' && node.level==0">
                <input type="file" (change)="onFileChange($event, node)" class="file-input" accept="image/png, image/svg+xml, image/jpeg, image/jpg, image/gif, application/pdf,image/x-eps'"  multiple/>
                <mat-icon class="pl-[5px] file-icon">attach_file</mat-icon>
              </label>
          </mat-tree-node>
        </mat-tree>
  </div>
    <div class="grid grid-cols-2 gap-4 mt-2 mb-2 p-4">
        <div>
          <button mat-dialog-close
            class="underline w-32 p-4 mr-3 font-bold text-[18px]">
            Annuler
          </button>
        </div>
        <div class="text-right" *ngIf="status=='SCANNED'">
          <button type="submit" (click)="RecoverDocuments()" *ngIf="!spinner"
            class="bg-[#0C8040] text-[#fff] border-[#0C8040] rounded-[28px] shadow-[0px_3px_6px_#00000029] w-60 p-4 mr-3 font-bold text-[16px]">
            Récupérer les documents
          </button>
          <span *ngIf="spinner">
            <mat-spinner [diameter]="40"></mat-spinner>
          </span>
        </div>
        <div class="text-right" *ngIf="status=='RECOVER'">
          <button type="submit" (click)="DeliverDocuments()" *ngIf="!DeliverSpinner"
            class="bg-[#0C8040] text-[#fff] border-[#0C8040] rounded-[28px] shadow-[0px_3px_6px_#00000029] w-60 p-4 mr-3 font-bold text-[16px]">
            Remettre les documents
          </button>
          <span *ngIf="DeliverSpinner">
            <mat-spinner [diameter]="40"></mat-spinner>
          </span>
        </div>
      </div>
</div>
