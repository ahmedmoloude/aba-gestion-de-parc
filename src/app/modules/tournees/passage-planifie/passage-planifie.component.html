<div class="bg-[#fff] shadow-[0px_3px_30px_#00000029] rounded-[20px] ml-6 mr-6 p-6">
  <div class="grid grid-cols-2 gap-2 mb-4">
    <div>
      <div class="flex col-start-1 col-end-3">
        <mat-icon>swap_calls</mat-icon>

        <h2 class="text-[#0C8040] font-semibold pl-2">Passage planifié</h2>
      </div>
    </div>
    <div>
      <div
      *ngIf="permissionService.hasPermission('Tournée', 'Génération d\'un passage planifié', 'C')"
        (click)="openDialog()"
        class="flex col-start-1 col-end-3 justify-end cursor-pointer"
      >
        <mat-icon class="pt-[5px]">add_circle</mat-icon>

        <h2 class="text-[#0C8040] font-semibold pl-2">
          Passage planifié
        </h2>
      </div>
    </div>
  </div>

  <!-- <div class="flex mt-4">
    <div class="w-5/6">
      <div class="flex flex-row mb-5">
        <div class="basis-1/3">
          <input
            type="text"
            class="p-3 w-11/12 pr-12 border rounded-3xl border-[#DBDBDB]"
            placeholder="Client"
          />
        </div>
        <div class="basis-1/3">
          <input
            type="text"
            class="p-3 w-11/12 pr-12 border rounded-3xl border-[#DBDBDB]"
            placeholder="Adresse de ramassage"
          />
        </div>
        <div class="basis-1/3">
          <input
            type="date"
            class="p-3 w-11/12 pr-12 border rounded-3xl border-[#DBDBDB]"
            placeholder="Adresse de ramassage"
          />
        </div>
        <div class="basis-1/3">
          <select
            class="p-3 pr-12 w-11/12 border rounded-3xl border-[#DBDBDB]"
            placeholder="Catégorie"
          >
            <option value="Expedition,Invoice,General">Catégorie</option>
            <option value="Expedition">Expedition</option>
            <option value="Invoice">Facture</option>
            <option value="General">Générale</option>
          </select>
        </div>
      </div>
    </div>
    <div class="w-1/6 flex items-start">
      <button
        class="text-white btn-filter text-[20px] bg-btn-green max-w-[170px] w-[170px] p-3"
      >
        <mat-icon class="mr-3">filter_list</mat-icon>
        <span class="text-white">Filter</span>
      </button>
    </div>
  </div> -->

  <div *ngIf="spinner" class="flex items-center justify-center mt-6 mb-6">
    <mat-spinner [diameter]="50"></mat-spinner>
  </div>

  <!--<table *ngIf="!spinner">
    <thead>
      <th>ID</th>
      <th>Descricao</th>
    </thead>
    <tbody>
      <tr *ngFor="let item of passages | groupBy: 'pickup_address_id'">
        <td>{{ item.key }}</td>
        <td>Name : {{ item.value.pickup_adresse |json }}</td>
        <div *ngFor="let i of item.value | groupBy: 'customer_id'">
          <td>{{i.key}}</td>
          <div *ngFor="let data of i.value">
            <span *ngFor="let day of data.planified_passages_time ">
                {{ day.day == '0' ? 'Dimanche' : ''}}
                {{ day.day == '1' ? 'Lundi' : ''}}
                {{ day.day == '2' ? 'Mardi' : ''}}
                {{ day.day == '3' ? 'Mercredi' : ''}}
                {{ day.day == '4' ? 'Jeudi' : ''}}
                {{ day.day == '5' ? 'Vendredi' : ''}}
                {{ day.day == '6' ? 'Samedi' : ''}}
                : {{ day.hours }}
            </span>
          </div>
        </div>
      </tr>
    </tbody>
  </table>-->
  <!-- <h1>affichage 1</h1>
    <ng-container *ngIf="!spinner">
      <div
        class="flex flex-row justify-between pl-3 pr-3 bg-white mb-5 shadow-[0px_3px_20px_#00000029] rounded-[18px] h-[55px] items-center"
        *ngFor="
          let item of passages  | groupBy: 'pickup_address_id'">
        <div class="width-content">
          <div class="flex items-center">
            <div class="icon ml-4">
              <mat-icon class="text-[19px] text-[#138742]">person_pin</mat-icon>
            </div>
            <div class="pl-3">
              <p class="text-[#b5b5b5] text-[10px]">Adresse de ramassage</p>
              <p class="text-[12px] text-[#000000]">{{ addresseChange(item.key).adress }}</p>
            </div>
          </div>
        </div>
        <mat-divider [vertical]="true" class="mx-auto"></mat-divider>
        <div class="width-content">
          <div class="flex items-center">
            <div class="icon ml-4">
              <mat-icon class="text-[19px] text-[#138742]">date_range</mat-icon>
            </div>
            <div class="pl-3">
              <p class="text-[#b5b5b5] text-[10px]">Date/Heure:</p>
              <div *ngFor="let i of item.value | groupBy: 'pickup_address_id'">
                <div *ngFor="let data of i.value ">
                  <span *ngFor="let day of data.planified_passages_time">
                      {{ day.day == '0' ? 'Dimanche' : ''}}
                      {{ day.day == '1' ? 'Lundi' : ''}}
                      {{ day.day == '2' ? 'Mardi' : ''}}
                      {{ day.day == '3' ? 'Mercredi' : ''}}
                      {{ day.day == '4' ? 'Jeudi' : ''}}
                      {{ day.day == '5' ? 'Vendredi' : ''}}
                      {{ day.day == '6' ? 'Samedi' : ''}}
                      : {{ day.hours }}
                </span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <mat-divider [vertical]="true" class="mx-auto"></mat-divider>
        <div class="width-content">
          <div class="flex items-center">
            <div class="icon ml-4">
              <mat-icon class="text-[19px] text-[#138742]">place</mat-icon>
            </div>
            <div class="pl-3">
              <p class="text-[#b5b5b5] text-[10px]">Client :</p>
              <div *ngFor="let i of item.value | groupBy: 'customer_id'">
                <p class="text-[12px] text-[#000000]" >
                  {{ clientChange(i.key).name }}
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="flex items-center pl-4 justify-end">
          <mat-icon class="cursor-pointer ml-4 text-[19px] text-[#138742]"
            >more_vert</mat-icon>
        </div>
      </div>
    </ng-container> -->

  <!-- <h1>affichage 2</h1> -->
  <div class="mt-10" *ngIf="!spinner">
    <div class="mt-36 mb-36 text-center" *ngIf="passages.length == 0 ">
      <p class="text-[#636363] text-[22px]">La Liste des passages planifiés est vide</p>
    </div>
    <div *ngIf="passages.length > 0 ">

      <ng-container>
        <div
          class="flex flex-row justify-between pl-3 pr-3 bg-white mb-5 shadow-[0px_3px_20px_#00000029] rounded-[18px] h-[55px] items-center"
          *ngFor="let item of passages | groupBy: 'pickup_address_id'">
          <div class="width-content">
            <div class="flex items-center">
              <div class="icon ml-4">
                <mat-icon class="text-[19px] text-[#138742]">person_pin</mat-icon>
              </div>
              <div class="pl-3">
                <p class="text-[#b5b5b5] text-[10px]">Client</p>
                <p class="text-[12px] text-[#000000]">
                  {{ item.customer.first_name }}
                </p>
              </div>
            </div>
          </div>
          <mat-divider [vertical]="true" class="mx-auto"></mat-divider>
          <div class="width-content">
            <div class="flex items-center">
              <div class="icon ml-4">
                <mat-icon class="text-[19px] text-[#138742]">date_range</mat-icon>
              </div>
              <div class="pl-3">
                <p class="text-[#b5b5b5] text-[10px]">Date / Heure :</p>
                <p class="text-[12px] text-[#000000]">
                  <span *ngFor="let day of item.planified_passages_time | paginate: { itemsPerPage: 6, currentPage: p }">
                    {{ day.day == "0" ? "Dimanche" : "" }}
                    {{ day.day == "1" ? "Lundi" : "" }}
                    {{ day.day == "2" ? "Mardi" : "" }}
                    {{ day.day == "3" ? "Mercredi" : "" }}
                    {{ day.day == "4" ? "Jeudi" : "" }}
                    {{ day.day == "5" ? "Vendredi" : "" }}
                    {{ day.day == "6" ? "Samedi" : "" }}
                    : {{ day.hours }}
                  </span>
                  <!--<span *ngFor="let hour of day.hours">
                  {{ hour }}
                </span>-->
                </p>
                <!--<ul ng-repeat="(key, value) in item.planified_passages_time | groupBy: 'day'">
                Group name: {{ key }}
                Group name: {{ value }}
                <li ng-repeat="player in value">
                  player: {{ player.name }}
                </li>
              </ul>-->
              </div>
            </div>
          </div>
          <mat-divider [vertical]="true" class="mx-auto"></mat-divider>
          <div class="width-content">
            <div class="flex items-center">
              <div class="icon ml-4">
                <mat-icon class="text-[19px] text-[#138742]">place</mat-icon>
              </div>
              <div class="pl-3">
                <p class="text-[#b5b5b5] text-[10px]">Adresse de ramassage :</p>
                <p class="text-[12px] text-[#000000]">
                  {{ item.pickup_adresse.adress }}
                </p>
              </div>
            </div>
          </div>
          <!--<mat-divider [vertical]="true" class="mx-auto"></mat-divider>
        <div class="width-content">
          <div class="flex items-center">
            <div class="pl-3">
              <p class="text-[#b5b5b5] text-[10px]">Nature de marchandise :</p>
              <p class="text-[12px] text-[#000000]">Exemple 1</p>
            </div>
          </div>
        </div>-->
          <div class="flex items-center pl-4 justify-end">
            <mat-icon class="cursor-pointer ml-4 text-[19px] text-[#138742]">more_vert</mat-icon>
          </div>
        </div>
      </ng-container>
      <div class="mt-10">
        <app-pagination [Links]="links" (getPage)="getTheNext($event)"></app-pagination>
      </div>
    </div>
  </div>
</div>
